<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تولید کننده کد بلاگ المنتور</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* CSS برای تمیز و کاربردی بودن ابزار */
        :root {
            --primary-color: #105AC0;
            --secondary-color: #D0191D;
            --background-light: #f4f6f8;
            --surface-light: #ffffff;
            --text-dark: #212529;
            --border-color: #e9ecef;
            --shadow-subtle: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: Tahoma, 'Afont Regular', sans-serif; /* Afont is assumed to be local or included in the final widget */
            background-color: var(--background-light);
            color: var(--text-dark);
            direction: rtl;
            padding: 20px;
            margin: 0;
            line-height: 1.6;
        }

        .tool-container {
            max-width: 900px;
            margin: 0 auto;
            background-color: var(--surface-light);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--shadow-subtle);
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 10px;
            font-size: 24px;
        }

        /* --- Form Styling --- */
        .form-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }

        .form-section h2 {
            color: var(--secondary-color);
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px dashed var(--border-color);
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #495057;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 14px;
            resize: vertical;
            direction: rtl;
        }

        textarea {
            min-height: 150px;
        }

        /* --- Dynamic Content/List Styling --- */
        .content-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            background-color: #ffffff;
            position: relative;
        }

        .content-item input,
        .content-item textarea {
            margin-bottom: 10px;
        }
        
        .content-fields {
            flex-grow: 1;
        }

        .remove-btn, .add-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 14px;
        }

        .remove-btn {
            background-color: #e85d04;
            color: white;
            align-self: flex-end;
        }

        .remove-btn:hover {
            background-color: #c94c03;
        }

        .add-btn {
            background-color: var(--primary-color);
            color: white;
            display: block;
            width: 100%;
            margin-top: 10px;
        }

        .add-btn:hover {
            background-color: #0d4a94;
        }

        .main-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
        }

        #generateBtn, #downloadBtn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        #generateBtn {
            background-color: var(--primary-color);
            color: white;
        }

        #generateBtn:hover {
            background-color: #0d4a94;
            transform: translateY(-2px);
        }

        #downloadBtn {
            background-color: var(--secondary-color);
            color: white;
            display: none; /* Hidden by default */
        }
        
        #downloadBtn.show {
            display: block;
        }

        #downloadBtn:hover {
            background-color: #b81519;
            transform: translateY(-2px);
        }

        /* --- Result Area --- */
        #resultContainer {
            margin-top: 30px;
            padding: 20px;
            background-color: #e9f0f9;
            border: 2px dashed var(--primary-color);
            border-radius: 10px;
        }

        #resultPre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', Courier, monospace;
            font-size: 12px;
            background-color: #f0f4f9;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #dcdcdc;
            max-height: 400px;
            overflow-y: auto;
            direction: ltr; /* HTML code is LTR */
        }
        
        .result-placeholder {
            text-align: center;
            color: #888;
            font-style: italic;
            padding: 20px;
        }
    </style>
</head>
<body>

<div class="tool-container">
    <h1><i class="fas fa-file-code"></i> تولید کننده کد HTML بلاگ</h1>
    <p style="text-align: center; color: #6c757d;">اطلاعات مورد نیاز پست بلاگ را وارد کنید. خروجی نهایی یک کد HTML آماده برای استفاده در ابزارک (Widget) HTML سفارشی المنتور خواهد بود.</p>

    <form id="blogForm">
        <div class="form-section">
            <h2><i class="fas fa-heading"></i> اطلاعات اصلی</h2>
            <label for="mainTitle">عنوان اصلی (h1):</label>
            <input type="text" id="mainTitle" value="روش مطالعه درس علوم و فنون ادبی رشته انسانی" required>

            <label for="subTitle">زیرنویس/شعار (Subtitle):</label>
            <input type="text" id="subTitle" value="چگونه علوم و فنون را اصولی، ماندگار و مفهومی یاد بگیریم" required>

            <label for="authorName">نام نویسنده:</label>
            <input type="text" id="authorName" value="امیرمهدی ترکمانی" required>

            <label for="publishDate">تاریخ انتشار:</label>
            <input type="text" id="publishDate" value="۱ آبان ۱۴۰۴" required>
            
            <label for="mainImage">لینک تصویر اصلی (Figure 1):</label>
            <input type="text" id="mainImage" value="https://radianlearn.ir/image/farsi7867sdf7sdf76s67fsh434.jpg">
            <label for="mainImageAlt">متن جایگزین تصویر اصلی (Alt):</label>
            <input type="text" id="mainImageAlt" value="مطالعه علوم و فنون ادبی">

            <label for="introText">متن مقدمه (Introduction):</label>
            <textarea id="introText" required>درس علوم و فنون ادبی یکی از مهم‌ترین و پایه‌ای‌ترین دروس رشته انسانی است که نقش قابل‌توجهی در موفقیت تحصیلی و به‌ویژه در کنکور دارد. بسیاری از دانش‌آموزان تصور می‌کنند علوم و فنون درس دشواری است، اما واقعیت این است که اگر روش مطالعه آن را بدانید، می‌توانید این درس را به یکی از نمره‌آورترین و جذاب‌ترین دروس خود تبدیل کنید.
در این مطلب، با ساختار درس علوم و فنون آشنا می‌شوید و یاد می‌گیرید چگونه هر بخش را اصولی و ماندگار مطالعه کنید.</textarea>
        </div>

        <div class="form-section">
            <h2><i class="fas fa-list-alt"></i> محتوای متنی و تصویری (Dynamic Content)</h2>
            <div id="dynamicContentArea">
                <div class="content-item" data-type="text">
                    <div class="content-fields">
                        <label>نوع محتوا:</label>
                        <select onchange="updateContentItemFields(this)">
                            <option value="paragraph" selected>پاراگراف (Paragraph)</option>
                            <option value="h2">عنوان سطح ۲ (H2)</option>
                            <option value="ul">لیست (Unordered List - ul)</option>
                            <option value="ol">لیست عددی (Ordered List - ol)</option>
                            <option value="figure">تصویر (Figure/Image)</option>
                        </select>
                        <textarea name="content-text" placeholder="متن محتوا را وارد کنید... (در صورت لیست، هر خط یک آیتم)"></textarea>
                        <div class="image-fields" style="display: none;">
                            <input type="text" name="content-image-src" placeholder="لینک تصویر">
                            <input type="text" name="content-image-alt" placeholder="متن جایگزین (Alt)">
                        </div>
                    </div>
                    <button type="button" class="remove-btn" onclick="removeContentItem(this)"><i class="fas fa-trash"></i> حذف</button>
                </div>
            </div>
            
            <button type="button" class="add-btn" onclick="addContentItem('paragraph')"><i class="fas fa-plus-circle"></i> افزودن محتوای جدید</button>
        </div>

        <div class="form-section">
            <h2><i class="fas fa-check-circle"></i> جمع‌بندی نهایی</h2>
            <label for="conclusionText">متن جمع‌بندی:</label>
            <textarea id="conclusionText" required>درس علوم و فنون ادبی مجموعه‌ای از دانش تاریخی، تحلیلی و زیبایی‌شناسی زبان فارسی است. با درک مفهومی و تمرین مداوم، می‌توانید به تسلط بالا برسید.  
اگر سبک‌شناسی را با فهم بخوانید، در عروض تمرین کنید و در آرایه‌ها مثال بزنید، این درس برایتان لذت‌بخش و نمره‌آور خواهد بود.  
یادگیری علوم و فنون یعنی شناخت روح زبان فارسی و درک اندیشه شاعران بزرگ.</textarea>
        </div>

        <div class="main-actions">
            <button type="button" id="generateBtn"><i class="fas fa-cogs"></i> تولید کد HTML</button>
            <button type="button" id="downloadBtn"><i class="fas fa-download"></i> دانلود فایل TXT</button>
        </div>
    </form>

    <div id="resultContainer">
        <p class="result-placeholder">پس از تولید، کد HTML نهایی اینجا نمایش داده خواهد شد.</p>
        <pre id="resultPre" style="display: none;"></pre>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const blogForm = document.getElementById('blogForm');
        const dynamicContentArea = document.getElementById('dynamicContentArea');
        const generateBtn = document.getElementById('generateBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const resultContainer = document.getElementById('resultContainer');
        const resultPre = document.getElementById('resultPre');

        // --- Core Functions for Dynamic Content ---

        function createContentItem(type = 'paragraph', content = '', imgSrc = '', imgAlt = '') {
            const item = document.createElement('div');
            item.className = 'content-item';
            item.setAttribute('data-type', type);

            const isImage = (type === 'figure');
            
            item.innerHTML = `
                <div class="content-fields">
                    <label>نوع محتوا:</label>
                    <select onchange="updateContentItemFields(this)">
                        <option value="paragraph" ${type === 'paragraph' ? 'selected' : ''}>پاراگراف (Paragraph)</option>
                        <option value="h2" ${type === 'h2' ? 'selected' : ''}>عنوان سطح ۲ (H2)</option>
                        <option value="ul" ${type === 'ul' ? 'selected' : ''}>لیست (Unordered List - ul)</option>
                        <option value="ol" ${type === 'ol' ? 'selected' : ''}>لیست عددی (Ordered List - ol)</option>
                        <option value="figure" ${type === 'figure' ? 'selected' : ''}>تصویر (Figure/Image)</option>
                    </select>
                    <textarea name="content-text" placeholder="متن محتوا را وارد کنید... (در صورت لیست، هر خط یک آیتم)" style="display: ${isImage ? 'none' : 'block'};">${content}</textarea>
                    
                    <div class="image-fields" style="display: ${isImage ? 'block' : 'none'};">
                        <input type="text" name="content-image-src" placeholder="لینک تصویر" value="${imgSrc}">
                        <input type="text" name="content-image-alt" placeholder="متن جایگزین (Alt)" value="${imgAlt}">
                    </div>
                </div>
                <button type="button" class="remove-btn" onclick="removeContentItem(this)"><i class="fas fa-trash"></i> حذف</button>
            `;
            return item;
        }

        // Expose functions to the global scope for event handlers in HTML
        window.addContentItem = function(type) {
            dynamicContentArea.appendChild(createContentItem(type));
        }

        window.removeContentItem = function(btn) {
            btn.closest('.content-item').remove();
        }

        window.updateContentItemFields = function(select) {
            const item = select.closest('.content-item');
            const type = select.value;
            const textarea = item.querySelector('textarea[name="content-text"]');
            const imageFields = item.querySelector('.image-fields');

            item.setAttribute('data-type', type);

            if (type === 'figure') {
                textarea.style.display = 'none';
                imageFields.style.display = 'block';
            } else {
                textarea.style.display = 'block';
                imageFields.style.display = 'none';
            }
            
            if (type === 'h2') {
                textarea.placeholder = 'متن عنوان H2 را وارد کنید.';
            } else if (type === 'ul' || type === 'ol') {
                 textarea.placeholder = 'متن آیتم‌های لیست را وارد کنید (هر آیتم در یک خط).';
            } else {
                textarea.placeholder = 'متن محتوا را وارد کنید...';
            }
        }
        
        // Add one initial item on load
        dynamicContentArea.innerHTML = '';
        addContentItem('h2');
        addContentItem('paragraph');
        addContentItem('ul');
        addContentItem('figure');


        // --- HTML Generator Logic ---

        function generateContentHTML() {
            let html = '';
            const items = dynamicContentArea.querySelectorAll('.content-item');

            items.forEach(item => {
                const type = item.getAttribute('data-type');
                const textarea = item.querySelector('textarea[name="content-text"]');
                const imageSrcInput = item.querySelector('input[name="content-image-src"]');
                const imageAltInput = item.querySelector('input[name="content-image-alt"]');

                if (type === 'h2') {
                    const text = textarea.value.trim();
                    if (text) {
                        html += `<h2>${text}</h2>\n`;
                    }
                } else if (type === 'paragraph') {
                    const text = textarea.value.trim().split('\n').filter(p => p.trim() !== '');
                    text.forEach(p => {
                        html += `<p>${p.trim()}</p>\n`;
                    });
                } else if (type === 'ul' || type === 'ol') {
                    const listItems = textarea.value.trim().split('\n').filter(li => li.trim() !== '');
                    if (listItems.length > 0) {
                        const tag = type;
                        let listHtml = `<${tag}>\n`;
                        listItems.forEach(li => {
                            listHtml += `                <li>${li.trim()}</li>\n`;
                        });
                        listHtml += `            </${tag}>\n`;
                        html += listHtml;
                    }
                } else if (type === 'figure') {
                    const src = imageSrcInput.value.trim();
                    const alt = imageAltInput.value.trim() || 'تصویر بلاگ';
                    if (src) {
                        html += `<figure>\n                <img src="${src}" alt="${alt}">\n            </figure>\n`;
                    }
                }
            });
            return html;
        }

        function generateFinalHTML() {
            const mainTitle = document.getElementById('mainTitle').value.trim();
            const subTitle = document.getElementById('subTitle').value.trim();
            const authorName = document.getElementById('authorName').value.trim();
            const publishDate = document.getElementById('publishDate').value.trim();
            const mainImage = document.getElementById('mainImage').value.trim();
            const mainImageAlt = document.getElementById('mainImageAlt').value.trim() || 'تصویر اصلی بلاگ';
            const introText = document.getElementById('introText').value.trim().split('\n').filter(p => p.trim() !== '').map(p => `<p>${p.trim()}</p>`).join('\n\n            ');
            const conclusionText = document.getElementById('conclusionText').value.trim().split('\n').filter(p => p.trim() !== '').map(p => `<p>${p.trim()}</p>`).join('\n\n            ');
            
            const dynamicContentHtml = generateContentHTML();

            // The template uses the original CSS and structure provided by the user
            const finalHtml = `
<div class="blog-post-widget" dir="rtl">
    <style>
        @font-face {
            font-family: 'Afont Black';
            src: url('/wp-content/uploads/2025/02/Afont-Black.ttf') format('truetype');
            font-weight: 900;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Afont Regular';
            src: url('/wp-content/uploads/2025/02/Afont-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        .blog-post-widget {
            font-family: 'Afont Regular', sans-serif;
            color: #212529;
            line-height: 1.8;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            width: 95%;
            margin: 2% auto;
            box-sizing: border-box;
        }

        .blog-post-widget .container {
            width: 100%;
            box-sizing: border-box;
            margin: 0 auto;
            background: #ffffff;
            padding: 40px 60px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        .blog-post-widget .title-box {
            background-color: #f8f9fa;
            border-radius: 15px;
            border: 1px solid #e9ecef;
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
        }

        .blog-post-widget h1 {
            color: #105AC0;
            font-family: 'Afont Black', sans-serif;
            font-size: 27px;
            font-weight: 900;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .blog-post-widget .subtitle {
            color: #6c757d;
            font-size: 16px;
            margin-bottom: 0;
            line-height: 1.6;
        }

        .blog-post-widget h2 {
            font-family: 'Afont Black', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: #343a40;
            margin: 40px 0 20px 0;
            padding: 15px 20px;
            background-color: #f8f9fa;
            border-right: 5px solid #105AC0;
            border-left: 5px solid #D0191D;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            line-height: 1.6;
        }

        .blog-post-widget p {
            font-size: 15px;
            margin-bottom: 20px;
        }

        .blog-post-widget figure {
            margin: 40px 0;
            text-align: center;
        }

        .blog-post-widget img {
            width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .blog-post-widget img:hover {
            transform: scale(1.03);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }

        .blog-post-widget .author-date-box {
            margin-top: 30px;
            padding: 20px 30px;
            background-color: #f8f9fa;
            border-radius: 15px;
            border: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .blog-post-widget .author-info, .blog-post-widget .date-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .blog-post-widget .author-info strong, .blog-post-widget .date-info strong {
            font-family: 'Afont Black', sans-serif;
            color: #495057;
            font-size: 0.9rem;
        }

        .blog-post-widget .author-info span, .blog-post-widget .date-info span {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .blog-post-widget .author-info::before, .blog-post-widget .date-info::before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            background-size: contain;
        }

        .blog-post-widget .author-info::before {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23105AC0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/%3E%3Ccircle cx='12' cy='7' r='4'/%3E%3C/svg%3E");
        }
        
        .blog-post-widget .date-info::before {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23D0191D' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'/%3E%3Cline x1='16' y1='2' x2='16' y2='6'/%3E%3Cline x1='8' y1='2' x2='8' y2='6'/%3E%3Cline x1='3' y1='10' x2='21' y2='10'/%3E%3C/svg%3E");
        }

        .blog-post-widget ul,
        .blog-post-widget ol {
            margin: 15px 0 20px 0;
            padding: 0;
            list-style-position: inside;
        }

        .blog-post-widget li {
            font-size: 15px;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .blog-post-widget {
                width: 93%;
                margin: 3% auto;
            }
            
            .blog-post-widget .container {
                padding: 30px 25px;
            }
            
            .blog-post-widget .title-box {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .blog-post-widget h1 {
                font-size: 20px;
                line-height: 1.6;
            }
            
            .blog-post-widget .subtitle {
                font-size: 14px;
            }
            
            .blog-post-widget h2 {
                font-size: 17px;
                padding: 12px 15px;
            }
            
            .blog-post-widget p {
                font-size: 13px;
            }

            .blog-post-widget li {
                font-size: 13px;
            }
            
            .blog-post-widget .author-date-box {
                flex-direction: column;
                align-items: flex-start;
                margin-top: 25px;
            }
        }

        @media (min-width: 769px) {
            .blog-post-widget .container {
                display: flex;
                gap: 30px;
                padding: 40px 40px;
            }
            
            .blog-post-widget .content-wrapper {
                flex: 1;
                width: 70%;
            }
            
            .blog-post-widget .author-date-box {
                width: 25%;
                position: sticky;
                top: 120px;
                height: fit-content;
                flex-direction: column;
                align-items: flex-start;
                margin-top: 0;
                padding: 20px;
            }
        }
    </style>

    <div class="container">
        <div class="content-wrapper">
            <div class="title-box">
                <h1>${mainTitle}</h1>
                <p class="subtitle">${subTitle}</p>
            </div>

            ${introText}

            <figure>
                <img src="${mainImage}" alt="${mainImageAlt}">
            </figure>

            ${dynamicContentHtml}

            <h2>جمع‌بندی نهایی</h2>
            ${conclusionText}
        </div>

        <div class="author-date-box">
            <div class="author-info">
                <strong>نویسنده:</strong>
                <span>${authorName}</span>
            </div>
            <div class="date-info">
                <strong>تاریخ انتشار:</strong>
                <span>${publishDate}</span>
            </div>
        </div>
    </div>

    <script>
        // Note: The original JS had a window.addEventListener('load') for fade-in effect.
        // It's included here for completeness, though it might not be necessary in Elementor.
        window.addEventListener('load', function() {
            const container = document.querySelector('.blog-post-widget .container');
            if (container) {
                container.style.opacity = '1';
            }
        });
    </script>
</div>
`;
            return finalHtml.trim();
        }

        generateBtn.addEventListener('click', function() {
            const finalCode = generateFinalHTML();

            // Display the result
            resultContainer.querySelector('.result-placeholder')?.remove();
            resultPre.style.display = 'block';
            resultPre.textContent = finalCode;
            downloadBtn.classList.add('show');
        });

        downloadBtn.addEventListener('click', function() {
            const codeToDownload = resultPre.textContent;
            if (!codeToDownload) {
                alert('ابتدا کد را تولید کنید.');
                return;
            }

            const blob = new Blob([codeToDownload], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'elementor_blog_widget_code.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('فایل با موفقیت دانلود شد.');
        });
    });
</script>
</body>
</html>
